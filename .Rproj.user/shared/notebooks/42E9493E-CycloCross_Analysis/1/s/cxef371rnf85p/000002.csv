"0","geoData <- read.csv(""geoMap.csv"", skip = 2, stringsAsFactors = FALSE)"
"0","names(geoData)[2] <- ""index"""
"0","geoData$index[geoData$index == ""<1""] <- ""0"""
"0","geoData$index <- as.numeric(geoData$index)"
"0","#read population data"
"0","urlPage <- read_html(""https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_by_population"")"
"0","countryText <- urlPage %>%"
"0","  html_nodes(""td"") %>%"
"0","  html_text()  "
"0","countryM <- matrix(countryText[-c(1,2)], ncol = 6, nrow = 242, byrow = TRUE)"
"0","countryM <- apply(countryM, 2, gsub, pattern = ""^ |\n|,|\\[Note [0-9]]"", replacement = """")"
"0","countryDF <- as.data.frame(countryM[, c(2, 3)], stringsAsFactors = FALSE)"
"0","names(countryDF) <- c(""Country"", ""Population"")"
"0","countryDF$Country[countryDF$Country == ""Czech Republic""] <- ""Czechia"""
"0","countryDF$Population <- as.numeric(countryDF$Population)"
"0","#merge"
"0","geoData <- merge(geoData, countryDF, by = ""Country"", all.x = TRUE)"
"0","#calculate index proportion"
"0","geoData$wIndex <- geoData$index/100*geoData$Population"
"0","geoData$Prop_of_all_searches <- round(geoData$wIndex/sum(geoData$wIndex, na.rm = TRUE)*100,1)"
"0","#print"
"0","kable(head(geoData[order(geoData$index, decreasing = TRUE), c(""Country"", ""index"", ""Prop_of_all_searches"")], n = 25))"
